# üìò –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ: –°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞ –Ω–∞ Python

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**–¶–µ–ª—å:** —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å Telegram-–±–æ—Ç–∞ —Å –±–∞–∑–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º:
- –û—Ç–≤–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É `/start`
- –í—ã–≤–æ–¥ inline-–∫–Ω–æ–ø–æ–∫
- –û—Ç–≤–µ—Ç –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–æ–∫

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è: `Python 3.12+`
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: `python-telegram-bot v20+`
- –°—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: `VSCode`, `PyCharm` –∏–ª–∏ –ª—é–±–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
telegram-bot/
‚îÇ
‚îú‚îÄ‚îÄ bot.py                 # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ README.md              # –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ diagrams/              # –î–∏–∞–≥—Ä–∞–º–º—ã –∏ —Å—Ö–µ–º—ã
```

---

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python:
https://www.python.org/downloads/

2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

```bash
python -m venv venv
source venv/bin/activate    # Linux/macOS
venv\Scripts\activate     # Windows
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install python-telegram-bot
```

4. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bot.py`

---

## üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–æ—Ç–∞

### üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- `ApplicationBuilder` ‚Äî –∑–∞–ø—É—Å–∫ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞
- `CommandHandler` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ `/start`
- `CallbackQueryHandler` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å inline-–∫–Ω–æ–ø–∫–∞–º–∏
- `MessageHandler` ‚Äî –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

---

### üìä UML –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (Component Diagram)

![–î–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](./images/uml.png)

---

## üíª –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –±–æ—Ç–∞

```python
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import (
    ApplicationBuilder, CommandHandler, CallbackQueryHandler,
    MessageHandler, ContextTypes, filters
)

BOT_TOKEN = '–í–ê–®_–¢–û–ö–ï–ù_–ó–î–ï–°–¨'

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = [
        [InlineKeyboardButton("–ö–Ω–æ–ø–∫–∞ 1", callback_data='1')],
        [InlineKeyboardButton("–ö–Ω–æ–ø–∫–∞ 2", callback_data='2')],
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    await update.message.reply_text('–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é:', reply_markup=reply_markup)

async def button(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    await query.edit_message_text(text=f"–í—ã –≤—ã–±—Ä–∞–ª–∏: {query.data}")

async def echo(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(f"–í—ã —Å–∫–∞–∑–∞–ª–∏: {update.message.text}")

if __name__ == '__main__':
    app = ApplicationBuilder().token(BOT_TOKEN).build()
    app.add_handler(CommandHandler("start", start))
    app.add_handler(CallbackQueryHandler(button))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, echo))
    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω...")
    app.run_polling()
```

---

## ‚öôÔ∏è –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥

### üìà –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (Sequence Diagram)

![–î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](./images/posled.png)

---

## üîÑ –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

| –°–æ–±—ã—Ç–∏–µ                     | –û–±—Ä–∞–±–æ—Ç—á–∏–∫             | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------------------------|------------------------|-----------|
| `/start`                   | `CommandHandler`       | –ü–æ—è–≤–ª—è–µ—Ç—Å—è –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏ |
| –ù–∞–∂–∞—Ç–∏–µ –Ω–∞ –∫–Ω–æ–ø–∫—É          | `CallbackQueryHandler` | –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç: "–í—ã –≤—ã–±—Ä–∞–ª–∏: X" |
| –õ—é–±–æ–π —Ç–µ–∫—Å—Ç (–±–µ–∑ /)        | `MessageHandler`       | –û—Ç–≤–µ—Ç: "–í—ã —Å–∫–∞–∑–∞–ª–∏: ..." |

---

## üåê –î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è (Deployment Diagram)

![–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è](./images/razvert.png)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. ‚úÖ –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` ‚Äî –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞.
2. ‚úÖ –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ‚Äî –±–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç "–í—ã –≤—ã–±—Ä–∞–ª–∏: 1/2".
3. ‚úÖ –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî –±–æ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç –µ–≥–æ.

---

## üìÇ requirements.txt

```txt
python-telegram-bot>=20.0
```

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

---

## üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ `getMe` –º–µ—Ç–æ–¥ API
- –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- –õ–æ–≥–∏—Ä—É–π—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è (`logging`)

---

## üß± –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

| –§—É–Ω–∫—Ü–∏—è               | –ú–æ–¥—É–ª—å / –ü–æ–¥—Ö–æ–¥                         |
|----------------------|------------------------------------------|
| –ö–Ω–æ–ø–∫–∏ —Å URL         | `InlineKeyboardButton(url=...)`          |
| –ú–µ–Ω—é –∫–æ–º–∞–Ω–¥          | `set_my_commands()`                      |
| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–î      | `sqlite3`, `SQLAlchemy`, `PostgreSQL`    |
| –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫–∞  | `webhook` –≤–º–µ—Å—Ç–æ `polling`               |
