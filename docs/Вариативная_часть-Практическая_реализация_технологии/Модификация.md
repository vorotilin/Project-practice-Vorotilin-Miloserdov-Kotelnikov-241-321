# üìò –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Telegram-–±–æ—Ç —Å –ø–æ–≥–æ–¥–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º

## üß© –¶–µ–ª—å –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –ø–æ–≥–æ–¥—ã. –ü—Ä–∏ –≤–≤–æ–¥–µ –∫–æ–º–∞–Ω–¥—ã `/start` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ **"–£–∑–Ω–∞—Ç—å –ø–æ–≥–æ–¥—É"**. –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –±–æ—Ç:

- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–≥–æ–¥—É —á–µ—Ä–µ–∑ OpenWeatherMap API;
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é: —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –≤–µ—Ç–µ—Ä, –æ–±–ª–∞—á–Ω–æ—Å—Ç—å;
- –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Å–ª–æ–≤–∏–π (–¥–æ–∂–¥—å, —Å–æ–ª–Ω—Ü–µ, –æ–±–ª–∞—á–Ω–æ—Å—Ç—å –∏ —Ç.–¥.).

---

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç            | –û–ø–∏—Å–∞–Ω–∏–µ                            |
|----------------------|-------------------------------------|
| –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è| Python 3.12                         |
| Telegram Bot API     | –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `python-telegram-bot`   |
| –ü–æ–≥–æ–¥–Ω—ã–π API         | OpenWeatherMap (https://openweathermap.org/api) |
| –ü—Ä–æ—Ç–æ–∫–æ–ª—ã            | HTTP/HTTPS                          |

---

## üì• –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install python-telegram-bot requests
```

---


## üßë‚Äçüíª –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: weather_bot.py
```python

import requests
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import (
    ApplicationBuilder,
    CommandHandler,
    CallbackQueryHandler,
    ContextTypes
)

BOT_TOKEN = '–í–ê–®_–¢–û–ö–ï–ù'
WEATHER_API_KEY = '–í–ê–®_API_–ö–õ–Æ–ß'
CITY = 'Moscow'
WEATHER_URL = f'https://api.openweathermap.org/data/2.5/weather?q={CITY}&appid={WEATHER_API_KEY}&units=metric&lang=ru'

# –ö–æ–º–∞–Ω–¥–∞ /start
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = [[InlineKeyboardButton("–£–∑–Ω–∞—Ç—å –ø–æ–≥–æ–¥—É", callback_data='weather')]]
    reply_markup = InlineKeyboardMarkup(keyboard)
    await update.message.reply_text('–ü—Ä–∏–≤–µ—Ç! –ß—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å?', reply_markup=reply_markup)

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "–£–∑–Ω–∞—Ç—å –ø–æ–≥–æ–¥—É"
async def button(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()

    if query.data == 'weather':
        weather_info = get_weather()

        message = f"""üå§Ô∏è –ü–æ–≥–æ–¥–∞ –≤ {CITY}:
–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: {weather_info['temp']}¬∞C
–°–∫–æ—Ä–æ—Å—Ç—å –≤–µ—Ç—Ä–∞: {weather_info['wind']} –º/—Å
–û–±–ª–∞—á–Ω–æ—Å—Ç—å: {weather_info['clouds']}%
"""

        condition = weather_info["description"].lower()
        if "–¥–æ–∂–¥" in condition:
            message += "\n‚òî –°–µ–≥–æ–¥–Ω—è –¥–æ–∂–¥–ª–∏–≤–æ. –í–æ–∑—å–º–∏—Ç–µ –∑–æ–Ω—Ç!"
        elif "—è—Å–Ω–æ" in condition:
            message += "\n‚òÄ –û—Ç–ª–∏—á–Ω–∞—è —Å–æ–ª–Ω–µ—á–Ω–∞—è –ø–æ–≥–æ–¥–∞. –ù–µ –∑–∞–±—É–¥—å—Ç–µ –æ—á–∫–∏!"
        elif "–æ–±–ª–∞—á–Ω–æ" in condition:
            message += "\nüå• –í–æ–∑–º–æ–∂–Ω–∞ –ø–∞—Å–º—É—Ä–Ω–æ—Å—Ç—å. –ó–∞—Ö–≤–∞—Ç–∏—Ç–µ –∫—É—Ä—Ç–∫—É."

        await query.edit_message_text(message)

def get_weather():
    try:
        response = requests.get(WEATHER_URL)
        data = response.json()
        return {
            "temp": data["main"]["temp"],
            "wind": data["wind"]["speed"],
            "clouds": data["clouds"]["all"],
            "description": data["weather"][0]["description"]
        }
    except Exception:
        return {
            "temp": "–Ω/–¥",
            "wind": "–Ω/–¥",
            "clouds": "–Ω/–¥",
            "description": "–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö"
        }

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
if __name__ == "__main__":
    app = ApplicationBuilder().token(BOT_TOKEN).build()
    app.add_handler(CommandHandler("start", start))
    app.add_handler(CallbackQueryHandler(button))
    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω...")
    app.run_polling()
```

## ‚òÅÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–Ω–æ–ø–∫–∞ "–£–∑–Ω–∞—Ç—å –ø–æ–≥–æ–¥—É"

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (–≤–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã `/start`), –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π **"–£–∑–Ω–∞—Ç—å –ø–æ–≥–æ–¥—É"**. –≠—Ç–æ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é `InlineKeyboardMarkup`, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –±–æ—Ç–æ–º –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤–≤–æ–¥–∞ –∫–æ–º–∞–Ω–¥ –≤—Ä—É—á–Ω—É—é.

### üîÑ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/start`**  
   –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ–º —Å –∫–Ω–æ–ø–∫–æ–π **"–£–∑–Ω–∞—Ç—å –ø–æ–≥–æ–¥—É"**.

2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É**  
   –ë–æ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞–∂–∞—Ç–∏–µ —Å –ø–æ–º–æ—â—å—é `CallbackQueryHandler`.

3. **–ë–æ—Ç –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –≤–Ω–µ—à–Ω–µ–º—É API OpenWeatherMap**  
   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è HTTP-–∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –ø–æ–≥–æ–¥—ã –ø–æ –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–¥–∞–Ω–Ω–æ–º—É –≥–æ—Ä–æ–¥—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Moscow`).

4. **–ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç JSON-–æ—Ç–≤–µ—Ç –æ—Ç API**, –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è:
   - —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤–æ–∑–¥—É—Ö–∞,
   - —Å–∫–æ—Ä–æ—Å—Ç—å –≤–µ—Ç—Ä–∞,
   - —É—Ä–æ–≤–µ–Ω—å –æ–±–ª–∞—á–Ω–æ—Å—Ç–∏,
   - —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π.

5. **–§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**  
   –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:
   - –ü—Ä–∏ –¥–æ–∂–¥–µ: `‚òî –°–µ–≥–æ–¥–Ω—è –¥–æ–∂–¥–ª–∏–≤–æ. –í–æ–∑—å–º–∏—Ç–µ –∑–æ–Ω—Ç!`
   - –ü—Ä–∏ —è—Å–Ω–æ–π –ø–æ–≥–æ–¥–µ: `‚òÄ –û—Ç–ª–∏—á–Ω–∞—è —Å–æ–ª–Ω–µ—á–Ω–∞—è –ø–æ–≥–æ–¥–∞. –ù–µ –∑–∞–±—É–¥—å—Ç–µ –æ—á–∫–∏!`
   - –ü—Ä–∏ –æ–±–ª–∞—á–Ω–æ—Å—Ç–∏: `üå• –í–æ–∑–º–æ–∂–Ω–∞ –ø–∞—Å–º—É—Ä–Ω–æ—Å—Ç—å. –ó–∞—Ö–≤–∞—Ç–∏—Ç–µ –∫—É—Ä—Ç–∫—É.`

6. **–ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é**  
   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `edit_message_text`, —á—Ç–æ–±—ã –∑–∞–º–µ–Ω–∏—Ç—å –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π –Ω–∞ —Ç–µ–∫—Å—Ç —Å –ø–æ–≥–æ–¥–æ–π.

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

![–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞ –ø–æ–≥–æ–¥—ã](./images/vivod.png)

## üìê UML –î–∏–∞–≥—Ä–∞–º–º—ã

![UML](./images/umlPogoda.png)

## üìå –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π

![–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](./images/PosledPogoda.png)
---